<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CyberLog - Blog de Ciberseguridad</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #121212;
      color: #fff;
      margin: 0;
      padding: 0;
      transition: background 0.3s, color 0.3s;
    }
    .light-mode {
      background-color: #f5f5f5;
      color: #000;
    }
    header, footer {
      background: #1e1e1e;
      color: white;
      padding: 20px;
      text-align: center;
    }
    .light-mode header,
    .light-mode footer {
      background: #ddd;
      color: #000;
    }
    nav ul {
      list-style: none;
      padding: 0;
    }
    nav li {
      display: inline-block;
      margin: 0 10px;
    }
    nav a {
      color: inherit;
      text-decoration: none;
    }
    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    .blog-entry {
      border: 1px solid #444;
      padding: 15px;
      margin: 15px 0;
      border-radius: 8px;
      background-color: #1a1a1a;
      transition: background-color 0.3s, border-color 0.3s;
    }
    .light-mode .blog-entry {
      border-color: #aaa;
      background-color: #fafafa;
    }
    button, input, textarea {
      padding: 10px;
      margin: 5px 0;
      border-radius: 5px;
      border: none;
      font-size: 1em;
    }
    .admin-panel {
      display: none;
      margin-top: 20px;
      border-top: 2px dashed #555;
      padding-top: 10px;
    }
    .spam-warning {
      color: red;
      font-size: 0.9em;
    }
    #toggle-mode {
      float: right;
      margin-top: -40px;
      margin-right: 20px;
      background: none;
      border: none;
      color: #00ffd5;
      font-size: 1.2em;
      cursor: pointer;
    }
    .light-mode #toggle-mode {
      color: #007a7a;
    }
    button:hover {
      background-color: #00ffd5;
      color: black;
      cursor: pointer;
      transition: 0.3s;
    }
  </style>
</head>
<body>
  <header>
    <h1>üõ°Ô∏è CyberLog</h1>
    <h2>üîê Explorando la Seguridad Inform√°tica</h2>
    <p>üíª Aprendiendo a proteger lo que otros no ven</p>
    <p>üß† Observa, analiza, protege.</p>
    <button id="toggle-mode" title="Cambiar modo claro/oscuro">üåô</button>
    <nav>
      <ul>
        <li><a href="#">Inicio</a></li>
        <li><a href="#">Art√≠culos</a></li>
        <li><a href="#">Proyectos</a></li>
        <li><a href="#">Contacto</a></li>
      </ul>
    </nav>
  </header>

  <main class="container">
    <section id="posts"></section>

    <div id="login-form">
      <h3>üîê Acceso de Administrador</h3>
      <input type="password" id="admin-pass" placeholder="Contrase√±a de admin" />
      <button onclick="login()">Ingresar</button>
      <p id="login-msg"></p>
    </div>

    <div class="admin-panel" id="admin-panel">
      <h3>üõ† Panel de Administraci√≥n</h3>
      <input type="text" id="new-title" placeholder="T√≠tulo del post" />
      <textarea id="new-content" placeholder="Contenido..."></textarea>
      <button onclick="addPost()">üì§ Publicar</button>
      <p id="spam-warning" class="spam-warning"></p>
    </div>
  </main>

  <footer class="container">
    <p>&copy; 2025 CyberLog - Seguridad Inform√°tica para Todos</p>
  </footer>

  <script>
    const ADMIN_PASSWORD = "Cyb3rLog!2025#";
    const discordWebhook = "https://discord.com/api/webhooks/ID/WEBHOOK"; // Pon tu webhook aqu√≠

    const postsContainer = document.getElementById("posts");
    const adminPanel = document.getElementById("admin-panel");
    const loginForm = document.getElementById("login-form");
    const loginMsg = document.getElementById("login-msg");
    const spamWarning = document.getElementById("spam-warning");
    const toggleModeBtn = document.getElementById("toggle-mode");

    let isAdmin = false;
    let lastPostTime = 0;
    let posts = [];

    // Carga posts de localStorage
    function loadPosts() {
      const saved = localStorage.getItem("cyberlog-posts");
      posts = saved ? JSON.parse(saved) : [];
    }

    // Guarda posts en localStorage
    function savePosts() {
      localStorage.setItem("cyberlog-posts", JSON.stringify(posts));
    }

    // Muestra posts en pantalla
    function renderPosts() {
      postsContainer.innerHTML = "";
      if(posts.length === 0){
        postsContainer.innerHTML = "<p>No hay publicaciones a√∫n.</p>";
        return;
      }
      posts.forEach((post, index) => {
        const entry = document.createElement("section");
        entry.className = "blog-entry";
        entry.innerHTML = `
          <h3>${escapeHtml(post.title)}</h3>
          <p>${escapeHtml(post.content).replace(/\n/g, "<br>")}</p>
          ${isAdmin ? `<button onclick="deletePost(${index})">üóëÔ∏è Eliminar</button>` : ""}
        `;
        postsContainer.appendChild(entry);
      });
    }

    // Evitar XSS b√°sico
    function escapeHtml(text) {
      return text.replace(/[&<>"']/g, function(m) {
        return {
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#39;'
        }[m];
      });
    }

    // Login admin
    function login() {
      const pass = document.getElementById("admin-pass").value;
      if (pass === ADMIN_PASSWORD) {
        isAdmin = true;
        adminPanel.style.display = "block";
        loginForm.style.display = "none";
        loginMsg.textContent = "";
        renderPosts();
      } else {
        loginMsg.textContent = "‚ùå Contrase√±a incorrecta";
      }
      document.getElementById("admin-pass").value = "";
    }

    // Agregar post nuevo
    function addPost() {
      const now = Date.now();
      if (now - lastPostTime < 10000) {
        spamWarning.textContent = "üõë Espera 10 segundos antes de publicar otra vez.";
        return;
      }

      const title = document.getElementById("new-title").value.trim();
      const content = document.getElementById("new-content").value.trim();
      if (!title || !content) {
        spamWarning.textContent = "‚ö†Ô∏è Completa t√≠tulo y contenido.";
        return;
      }

      posts.unshift({ title, content });
      savePosts();
      renderPosts();

      document.getElementById("new-title").value = "";
      document.getElementById("new-content").value = "";
      spamWarning.textContent = "";
      lastPostTime = now;

      // Log a Discord
      fetch(discordWebhook, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          content: `üì¢ Nuevo post publicado en CyberLog:\n**${title}**\n${content}`
        })
      }).catch(() => {
        console.warn("No se pudo enviar el log a Discord.");
      });
    }

    // Eliminar post
    function deletePost(index) {
      const title = posts[index].title;
      if (!confirm(`¬øEliminar el post "${title}"?`)) return;

      posts.splice(index, 1);
      savePosts();
      renderPosts();

      // Log a Discord
      fetch(discordWebhook, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          content: `üóëÔ∏è El admin elimin√≥ el post: **${title}**`
        })
      }).catch(() => {
        console.warn("No se pudo enviar el log a Discord.");
      });
    }

    // Toggle modo claro/oscuro
    toggleModeBtn.addEventListener("click", () => {
      document.body.classList.toggle("light-mode");
      if(document.body.classList.contains("light-mode")) {
        toggleModeBtn.textContent = "üåô";
      } else {
        toggleModeBtn.textContent = "‚òÄÔ∏è";
      }
    });

    // Inicializaci√≥n
    loadPosts();
    renderPosts();
  </script>
</body>
</html>
